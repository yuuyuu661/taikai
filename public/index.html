<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>大会当日サイト（総当たり・2試合/ラウンド）</title>
  <style>
    :root { color-scheme: light dark; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, 'Noto Sans JP', 'Yu Gothic', sans-serif; margin: 16px; }
    h1 { font-size: 1.4rem; margin: 0 0 8px; }
    .panel { border: 1px solid #ccc; border-radius: 12px; padding: 12px; margin-bottom: 12px; }
    .row { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 8px; align-items: start; }
    label { font-weight: 600; font-size: .92rem; }
    input[type=text], input[type=url], input[type=password] { width: 100%; padding: 8px; border: 1px solid #bbb; border-radius: 8px; }
    input[type=file] { width: 100%; }
    button { padding: 8px 12px; border: 0; border-radius: 10px; background: #111; color: #fff; cursor: pointer; }
    button.secondary { background: #666; }
    .badge { display:inline-block; padding:2px 8px; border-radius:999px; background:#eee; font-size:.8rem; }
    .grid2 { display:grid; grid-template-columns: repeat(2, minmax(260px, 1fr)); gap: 8px; }
    .match { border: 1px solid #ddd; border-radius: 10px; padding: 8px; }
    .table { border-collapse: collapse; width: 100%; }
    .table th,.table td { border-bottom: 1px solid #ddd; padding: 6px 8px; text-align: left; }
    .sticky { position: sticky; top: 0; background: #fff; z-index: 1; padding: 8px 0; border-bottom: 1px solid #eee; }
    small { color: #666; }
  </style>
</head>
<body>
  <h1>大会当日サイト（総当たり・2試合/ラウンド）</h1>
  <div class="panel">
    <div class="row">
      <div>
        <label>運営パスワード</label>
        <input type="password" id="adminKey" placeholder="ADMIN_PASSWORD" />
      </div>
      <div style="display:flex; gap:8px; align-items:end;">
        <button id="btnGen">スケジュール生成（全消去→再生成）</button>
        <button id="btnReload" class="secondary">再読込</button>
      </div>
    </div>
    <small>※結果入力やスケジュール生成は運営パス必須。チーム登録は誰でも可。</small>
  </div>

  <div class="panel">
    <h2>チーム登録</h2>
    <form id="teamForm">
      <div class="row">
        <div><label>チーム名</label><input type="text" name="team_name" required></div>
        <div><label>リーダー名</label><input type="text" name="leader_name" required></div>
        <div><label>リーダーアイコン（画像アップ可・任意）</label><input type="file" name="leader_icon" accept="image/*"></div>
        <div><label>リーダー使用ポケモン画像URL 1</label><input type="url" name="leader_poke1_url" placeholder="https://..."></div>
        <div><label>リーダー使用ポケモン画像URL 2</label><input type="url" name="leader_poke2_url" placeholder="https://..."></div>
        <div><label>リーダー使用ポケモン画像URL 3</label><input type="url" name="leader_poke3_url" placeholder="https://..."></div>
      </div>
      <hr>
      <div class="row" id="members"></div>
      <div style="margin-top:8px;"><button>登録する</button></div>
    </form>
    <div id="teamList"></div>
  </div>

  <div class="panel">
    <div class="sticky"><h2>対戦表（2試合/ラウンド）</h2></div>
    <div id="schedule" class="grid2"></div>
  </div>

  <div class="panel">
    <div class="sticky"><h2>順位表</h2></div>
    <table class="table" id="standings"></table>
  </div>

  <script src="/app.js"></script>
</body>
</html>
